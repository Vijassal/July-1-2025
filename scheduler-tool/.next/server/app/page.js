(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},4487:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(7096),a=s(6132),n=s(7284),l=s.n(n),i=s(2564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3982)),"/Users/vishaljassal/Documents/modernized-events-app/scheduler-tool/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5345)),"/Users/vishaljassal/Documents/modernized-events-app/scheduler-tool/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/vishaljassal/Documents/modernized-events-app/scheduler-tool/app/page.tsx"],u="/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2628:(e,t,s)=>{Promise.resolve().then(s.bind(s,4467))},4467:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>SchedulerPage});var r=s(784),a=s(9885),n=s(7114),l=s(3196);let i=process.env.NEXT_PUBLIC_API_BASE_URL||"https://api.mycompany.com";async function submitBooking(e){try{let t=await fetch(`${i}/api/scheduler/book`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){return console.error("Error submitting booking:",e),{success:!1,error:"Failed to submit booking"}}}async function getBookingLinkDetails(e){try{let t=await fetch(`${i}/api/scheduler/link/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){return console.error("Error fetching booking link details:",e),null}}async function validateBookingLink(e){try{let t=await getBookingLinkDetails(e);return t&&t.success}catch(e){return!1}}var o=s(4754),d=s(3709),c=s(6466),u=s(4477),m=s(8210),x=s(31),h=s(2032),g=s(3680),p=s(9490),b=s(4571),v=s(9546);function BookingForm({linkToken:e,eventId:t}){let[s,n]=(0,a.useState)("date"),[l,i]=(0,a.useState)(null),[y,j]=(0,a.useState)(""),[f,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(""),[_,P]=(0,a.useState)({vendor_name:"",vendor_email:"",vendor_phone:"",service_type:"",service_description:""}),S=new Date,M=(0,c.Z)(S),E=(0,u.Z)((0,d.Z)(S,28)),T=(0,m.Z)({start:M,end:E}),handleDateSelect=e=>{i(e),n("time")},handleTimeSelect=e=>{j(e),n("details")},handleFormSubmit=async s=>{s.preventDefault(),N(!0);try{let s={..._,proposed_date:l?(0,o.Z)(l,"yyyy-MM-dd"):"",proposed_time:y,event_id:t,booking_link_id:e},r=await submitBooking(s);r.success?(k(r.booking_id||""),n("confirmation")):alert(r.error||"Booking failed. Please try again.")}catch(e){console.error("Booking error:",e),alert("An error occurred. Please try again.")}finally{N(!1)}};return"confirmation"===s?r.jsx("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(h.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Confirmed!"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Your booking has been successfully submitted. We'll get back to you soon."}),w&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Booking ID: ",r.jsx("span",{className:"font-mono",children:w})]}),r.jsx("button",{onClick:()=>{n("date"),i(null),j(""),P({vendor_name:"",vendor_email:"",vendor_phone:"",service_type:"",service_description:""})},className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Book Another Appointment"})]})}):(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Schedule Your Appointment"}),r.jsx("p",{className:"text-blue-100 mt-1",children:"Choose a date and time that works for you"})]}),r.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50",children:r.jsx("div",{className:"flex items-center space-x-4",children:["date","time","details"].map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${s===e?"bg-blue-600 text-white":"details"===s&&t<2?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:t+1}),t<2&&r.jsx("div",{className:`w-12 h-0.5 mx-2 ${"details"===s?"bg-green-500":"bg-gray-300"}`})]},e))})}),(0,r.jsxs)("div",{className:"p-6",children:["date"===s&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Select a Date"}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>r.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:e},e)),T.map(e=>{let t=(0,x.Z)(e,S),s=e<S,a=l&&(0,x.Z)(e,l);return r.jsx("button",{onClick:()=>!s&&handleDateSelect(e),disabled:s,className:`
                      p-3 rounded-lg text-sm font-medium transition-colors
                      ${s?"text-gray-300 cursor-not-allowed":a?"bg-blue-600 text-white":t?"bg-blue-100 text-blue-600 hover:bg-blue-200":"text-gray-700 hover:bg-gray-100"}
                    `,children:(0,o.Z)(e,"d")},e.toISOString())})]})]}),"time"===s&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Select a Time for ",l&&(0,o.Z)(l,"EEEE, MMMM d")]}),r.jsx("div",{className:"grid grid-cols-4 gap-3",children:["09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","01:00 PM","01:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM","06:00 PM","06:30 PM"].map(e=>r.jsx("button",{onClick:()=>handleTimeSelect(e),className:"p-3 border border-gray-200 rounded-lg text-sm font-medium hover:border-blue-500 hover:bg-blue-50 transition-colors",children:e},e))}),r.jsx("button",{onClick:()=>n("date"),className:"mt-4 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Back to date selection"})]}),"details"===s&&(0,r.jsxs)("form",{onSubmit:handleFormSubmit,className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Your Details"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(g.Z,{className:"w-4 h-4 inline mr-2"}),"Full Name *"]}),r.jsx("input",{type:"text",required:!0,value:_.vendor_name,onChange:e=>P({..._,vendor_name:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(p.Z,{className:"w-4 h-4 inline mr-2"}),"Email Address *"]}),r.jsx("input",{type:"email",required:!0,value:_.vendor_email,onChange:e=>P({..._,vendor_email:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(b.Z,{className:"w-4 h-4 inline mr-2"}),"Phone Number"]}),r.jsx("input",{type:"tel",value:_.vendor_phone,onChange:e=>P({..._,vendor_phone:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type *"}),(0,r.jsxs)("select",{required:!0,value:_.service_type,onChange:e=>P({..._,service_type:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select a service type"}),r.jsx("option",{value:"catering",children:"Catering"}),r.jsx("option",{value:"photography",children:"Photography"}),r.jsx("option",{value:"music",children:"Music/Entertainment"}),r.jsx("option",{value:"decor",children:"Decorations"}),r.jsx("option",{value:"transportation",children:"Transportation"}),r.jsx("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(v.Z,{className:"w-4 h-4 inline mr-2"}),"Additional Details"]}),r.jsx("textarea",{value:_.service_description,onChange:e=>P({..._,service_description:e.target.value}),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tell us more about your requirements..."})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Booking Summary"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Date:"})," ",l&&(0,o.Z)(l,"EEEE, MMMM d, yyyy")]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Time:"})," ",y]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Service:"})," ",_.service_type||"Not selected"]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>n("time"),className:"flex-1 py-3 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"← Back"}),r.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Submitting...":"Confirm Booking"})]})]})]})]})}var y=s(3294),j=s(4409);function Unauthorized(){return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(y.Z,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600",children:"You need a valid invitation link to access this scheduling tool."})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx(j.Z,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Invalid or Missing Token"}),r.jsx("p",{className:"text-sm text-yellow-700",children:"This scheduling tool requires a valid JWT token to access. Please use the link provided in your invitation email."})]})]})}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"If you believe this is an error, please contact the event organizer."}),r.jsx("button",{onClick:()=>window.close(),className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:"Close Window"})]}),r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:r.jsx("p",{className:"text-xs text-gray-400",children:"Scheduler Tool v1.0 • Secure Booking System"})})]})})}function SchedulerPage(){let[e,t]=(0,a.useState)(!0),[s,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),h=(0,n.useSearchParams)();return((0,a.useEffect)(()=>{let initializeAuth=async()=>{try{let e=(0,l.$8)();i(e);let t=(0,l.LP)();if(t){u(t);let e=await validateBookingLink(t);d(e)}let s=h.get("event_id");s&&x(s)}catch(e){console.error("Auth initialization error:",e),i(!1),d(!1)}finally{t(!1)}};initializeAuth()},[h]),e)?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading scheduler..."})]})}):s&&o?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsx(BookingForm,{linkToken:c,eventId:m})})}):r.jsx(Unauthorized,{})}},3982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var r=s(5153);let a=(0,r.createProxy)(String.raw`/Users/vishaljassal/Documents/modernized-events-app/scheduler-tool/app/page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,o=i}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[472,360,345,134,196],()=>__webpack_exec__(4487));module.exports=s})();